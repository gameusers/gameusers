function slideGameList(e){var t=new FormData;t.append("type",$("#slide_game_list_select_menu").val()),"undefined"!=typeof appMode&&t.append("app_mode",!0);var o=$("#form_fuel_csrf_token").val();t.append("fuel_csrf_token",o),$.ajax({url:uri_base+"rest/common2/slide_game_list.json",dataType:"json",type:"POST",data:t,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code&&($("#swiper_container_slide_game_list div").html(e.code),swiperSlideGameList.update(!0))}).fail(function(){}).always(function(){})}function getContentId(e){return $(e).parents(".content_box").attr("id")}function changeLanguage(e){uri_base.indexOf("gameusers.org")!=-1?$.cookie("language",e,{expires:365,path:"/",domain:"gameusers.org",secure:!0}):$.cookie("language",e),location.href=uri_current}function plusGood(e,t,o){var n=e;if($(n).data("checked"))return void $(n).popover("toggle");loadingStart(n);var a=new FormData;a.append("type",t),"recruitment"==t||"recruitment_reply"==t?a.append("id",o):a.append("no",o);var i=$("#form_fuel_csrf_token").val();a.append("fuel_csrf_token",i),$.ajax({url:uri_base+"rest/common/plus_good.json",dataType:"json",type:"POST",data:a,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.good?(e.level_id_user&&$("[id="+e.level_id_user+"]").text(e.level_user),e.level_id_profile&&$("[id="+e.level_id_profile+"]").text(e.level_profile),$(n).children("#good_"+t+"_"+o).text(e.good)):($(n).popover({html:!1,trigger:"manual",placement:"bottom",title:"ERROR",content:e.alert_message}),$(n).popover("toggle"),$(n).data("checked",!0),$(n).on("shown.bs.popover",function(){goodStopTimeout=setTimeout(function(){$(n).popover("hide")},2e3)}).on("hidden.bs.popover",function(){clearTimeout(goodStopTimeout)}),$("body").on("click",function(e){$(n).each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})}))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){loadingStop(n)})}function readNotifications(e,t,o){var n=getContentId(e),a="#notifications_box",i=$(e).attr("id");"header_notifications"!==i&&loadingToggle(e,null);var r=new FormData;r.append("page",t),r.append("user_no",o);var c;"read_notifications_unread"==i?(c="unread",$(a).data("type","unread"),$("#read_notifications_unread").attr("class","btn btn-default ladda-button active"),$("#read_notifications_already").attr("class","btn btn-default ladda-button"),$("#notifications_change_all_unread_button").show()):"read_notifications_already"==i?(c="already",$(a).data("type","already"),$("#read_notifications_unread").attr("class","btn btn-default ladda-button"),$("#read_notifications_already").attr("class","btn btn-default ladda-button active"),$("#notifications_change_all_unread_button").hide()):c=$(a).data("type"),r.append("type",c),"undefined"!=typeof appMode&&r.append("app_mode",appMode),$.ajax({url:uri_base+"rest/user/read_notifications.json",dataType:"json",type:"POST",data:r,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){if(e.code){$(a).html(e.code),initPlayerNotifications(n);var t,o=$("#header_notifications_unread_total").text(),i=$("#header_notifications_unread_total").data("unread_id");t=i?i.split(","):[];var r;r=e.unread_id?e.unread_id.split(","):[];var c=0;$.each(r,function(e,o){$.inArray(o,t)==-1&&(t.push(o),c++)});var s=0;s=o-c<0?0:o-c,$("#header_notifications_unread_total").text(s),i=t.join(","),$("#header_notifications_unread_total").data("unread_id",i)}else $(a).html("")}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){"header_notifications"!==i&&loadingToggle(e,null),"read_notifications_unread"==i?$("#notifications_change_all_unread_button").show():"read_notifications_already"==i&&$("#notifications_change_all_unread_button").hide()})}function initPlayerNotifications(e){$("#"+e+" #tab_notifications_"+e)[0]&&$("#"+e+" #tab_notifications_"+e+" #player_notifications_long").hide(),$("#"+e+" #tab_notifications_"+e+" #player_notifications_read_all_button").on("click",function(){$(this).parents("#player_notifications_box").find("#player_notifications_long").toggle(),$(this).parents("#player_notifications_box").find("#player_notifications_short").toggle()})}function readNotificationsUnreadTotal(){var e="#header_notifications_unread_total";if($(e)[0]&&!$(e).data("reading")){$(e).data("reading",!0);var t=new FormData;"undefined"!=typeof appMode&&t.append("app_mode",appMode),$.ajax({url:uri_base+"rest/common/read_notifications_unread_total.json",dataType:"json",type:"POST",data:t,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(t){t.total?$(e).html(t.total):$(e).html("-"),$(e).data("reading",!1)}).fail(function(){}).always(function(){})}}function changeAllUnreadToAlready(e){var t="未読のお知らせをすべて既読にします。よろしいですか？";if(window.confirm(t)){var o="#header_notifications_unread_total";loadingToggle(e,null);var n=new FormData;"undefined"!=typeof appMode&&n.append("app_mode",appMode),$.ajax({url:uri_base+"rest/common/change_all_unread_to_already.json",dataType:"json",type:"POST",data:n,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.success&&($("#notifications_box").html(""),$(o).html("0"))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){loadingToggle(e,null)})}}function popupMovie(e){var t=$(e).data("url");$.magnificPopup.open({items:{src:t},type:"iframe"})}function rewriteUrl(){if("undefined"==typeof appMode&&window.history&&window.history.pushState){var e=uri_current.replace(uri_base,""),t=e.split("/");window.history.pushState("","",uri_base+t[0]+"/"+t[1]),$(window).on("popstate",function(){location.href=uri_current})}}function changeAdAppInstall(e,t){t&&(content_id=t),0===e?($("#"+content_id+" [id^=ad_app_install_main_]").hide(),$("#"+content_id+" [id^=ad_app_install_main_]").eq(0).show()):($("#"+content_id+" [id^=ad_app_install_main_]").hide(),$("#"+content_id+" #ad_app_install_main_"+e).show())}var GAMEUSERS=GAMEUSERS||{};GAMEUSERS.namespace=function(e){var t,o=e.split("."),n=GAMEUSERS;for("GAMEUSERS"===o[0]&&(o=o.slice(1)),t=0;t<o.length;t+=1)"undefined"==typeof n[o[t]]&&(n[o[t]]={}),n=n[o[t]]},GAMEUSERS.namespace("GAMEUSERS.common"),GAMEUSERS.common.openedContent=null,GAMEUSERS.common.headerHeight=null,GAMEUSERS.common.bsTabHeight=null,GAMEUSERS.common.scrollMargin=null,GAMEUSERS.common.headerBsTabMarginSize=null,GAMEUSERS.common.swiperSocialButton=null,GAMEUSERS.common.swiperHelp=null,GAMEUSERS.common.masonryFeed=null,GAMEUSERS.common.masonryFooter=null;var swiperSlideGameList,swiperSlideAmazonAd,scrollBlankSize=-117;$(function(){var e=window.location.href.split(uri_base)[1];if(e=e.split("/"),GAMEUSERS.common.urlParam1=e[1],GAMEUSERS.common.urlParam2=e[2],GAMEUSERS.common.urlParam3=e[3],GAMEUSERS.common.urlParam4=e[4],"undefined"!=typeof contents_data&&window.history.pushState(contents_data[contents_data.initial_load.group+"_"+contents_data.initial_load.content].state,null,uri_current),FastClick.attach(document.body),$(".cd-auto-hide-header")[0]?GAMEUSERS.common.readNotificationsUnreadTotal():readNotificationsUnreadTotal(),GAMEUSERS.common.headerHeightVer2=$(".cd-auto-hide-header").outerHeight(!0),GAMEUSERS.common.tabHeightVer2=$(".cd-secondary-nav").outerHeight(!0),GAMEUSERS.common.scrollMargin=GAMEUSERS.common.headerHeightVer2+GAMEUSERS.common.tabHeightVer2+20,$(document).on("click","#header_notifications",function(){var e=$(this).data("user_no");return GAMEUSERS.common.readNotifications(this,1,e),$("#notifications_modal").modal("toggle"),!1}),$("#swiper_container_social_button")[0]){GAMEUSERS.common.swiperSocialButton=new Swiper("#swiper_container_social_button",{slidesPerView:"auto",freeMode:!0});var t=location.href;GAMEUSERS.common.socialCountTwitter(t),GAMEUSERS.common.socialCountFacebook(t),GAMEUSERS.common.socialCountGooglePlus(t),GAMEUSERS.common.socialCountHatena(t),GAMEUSERS.common.socialCountPocket(t);var o=$("#swiper_container_social_button").data("version");2==o&&($("#twitter, #facebook, #google_plus, #hatena, #pocket, #line, #email").jrumble({x:2,y:2,rotation:1,speed:20}),$("#twitter, #facebook, #google_plus, #hatena, #pocket, #line, #email").hover(function(){$(this).trigger("startRumble")},function(){$(this).trigger("stopRumble")}))}$("#swiper_container_slide_game_list")[0]&&(swiperSlideGameList=new Swiper("#swiper_container_slide_game_list",{slidesPerView:"auto",freeMode:!0,freeModeMomentumRatio:.5,autoplay:2500,autoplayDisableOnInteraction:!0,loop:!0}),$("#slide_game_list_select_menu").change(function(){slideGameList(content_id)})),$("#swiper_container_slide_amazon_ad")[0]&&(swiperSlideAmazonAd=new Swiper("#swiper_container_slide_amazon_ad",{slidesPerView:"auto",freeMode:!0,freeModeMomentumRatio:.5,autoplay:2500,autoplayDisableOnInteraction:!0,loop:!0}),$('[data-toggle="tooltip"]').tooltip({container:"body"})),$("#bsTab")[0]&&GAMEUSERS.common.bsTabFixed.setUp(),GAMEUSERS.common.headerHeight=$("header").outerHeight(!0),GAMEUSERS.common.bsTabHeight=$("#bsTab").height(),GAMEUSERS.common.headerBsTabMarginSize=GAMEUSERS.common.headerHeight+GAMEUSERS.common.bsTabHeight+10,$(".cd-secondary-nav ul li a").on("click",function(e){e.preventDefault();var t=$(this).data("group"),o=contents_data.opened_content[t],n=contents_data[t+"_"+o].state,a=contents_data[t+"_"+o].url;window.history.pushState(n,null,a),GAMEUSERS.common.changeMenuContents(this,t,null);var i=contents_data[t+"_"+o].meta_title,r=contents_data[t+"_"+o].meta_keywords,c=contents_data[t+"_"+o].meta_description;i&&r&&c&&GAMEUSERS.common.rewriteMeta(i,r,c),"feed"===t&&""===agent_type&&GAMEUSERS.common.masonryFeed.masonry()}),$("[id^=change_contents_]").hide(),$("[id^=change_contents_].active").show(),GAMEUSERS.common.searchGameListNo(null),$(document).on("change","#help_menu",function(){var e=$(this).val().split("/"),t=e[0],o=e[1];$("#content_help_index")[0]?GAMEUSERS.common.readHelpVer2(this,1,t,o):GAMEUSERS.common.readHelp(this,1,t,o)}),$(document).on("click","#jslink",function(e){e.preventDefault();var t="_self",o=$(this).data("jslink");window.open(o,t)}),$("#about_amazon_ad")[0]&&(PNotify.prototype.options.delay=5e3,$(document).on("click","#about_amazon_ad",function(){var e=$(this).data("title"),t=$(this).data("text");new PNotify({styling:"bootstrap3",title:e,text:t})})),$("#footer_content_card")[0]&&$("footer").imagesLoaded(function(){GAMEUSERS.common.masonryFooter=$("footer .card_box").masonry({itemSelector:".card_game"})}),$("#footer_select_box").change(function(){var e=$("#footer_select_box option:selected").val();$.cookie("footer_type",e),GAMEUSERS.common.readFooterCard(this)});var n=!0;$("footer").on("mouseenter",function(){n&&(GAMEUSERS.common.readGameIndex(this,1),n=!1)}),$("[id^=footer_button_]").on("click",function(){$("[id^=footer_button_]").removeClass("active"),$(this).addClass("active");var e=$(this).data("type");$("[id^=footer_content_]").addClass("element_hidden"),$("#footer_content_"+e).removeClass("element_hidden"),n&&(GAMEUSERS.common.readGameIndex(this,1),n=!1)}),$("#menu_to_top").on("click",function(){GAMEUSERS.common.stickyStuck=!1,scrollToAnchor("main",-(GAMEUSERS.common.headerHeightVer2+GAMEUSERS.common.tabHeightVer2),0)}),$("#menu_to_bottom").on("click",function(){GAMEUSERS.common.stickyStuck=!1,scrollToAnchor("#swiper_container_social_button",-(GAMEUSERS.common.headerHeightVer2+GAMEUSERS.common.tabHeightVer2),0)}),$("body").magnificPopup({delegate:"[id=modal_image]",type:"image"}),$(document).on("focus","textarea",function(e){autosize($(this))}),$(document).on("click","[data-invalid-link=true]",function(e){e.preventDefault()})}),GAMEUSERS.common.stickySelector=null,GAMEUSERS.common.stickyStuck=!1,GAMEUSERS.common.stickyAnimationDone=!0,GAMEUSERS.common.stickyExistenceArr=[],GAMEUSERS.common.stickyMenu=function(e,t){if(GAMEUSERS.common.stickySelector=$(e),GAMEUSERS.common.stickyMenuAnimation(0,0),$.inArray(e,GAMEUSERS.common.stickyExistenceArr)===-1){GAMEUSERS.common.stickyExistenceArr.push(e);var o=0;"rectangle"===t?o=-180:"none"===t?o=100:"small"===t&&(o=100),GAMEUSERS.common.stickySelector.stick_in_parent({offset_top:o,spacer:!1}).on("sticky_kit:stick",function(e){GAMEUSERS.common.stickyStuck=!0}).on("sticky_kit:unstick",function(e){GAMEUSERS.common.stickyStuck=!1,GAMEUSERS.common.stickyMenuAnimation(0,600)}).on("sticky_kit:bottom",function(e){}).on("sticky_kit:unbottom",function(e){});var n=$(window).scrollTop();$(window).on("scroll",function(){var e=parseInt(GAMEUSERS.common.stickySelector.css("padding-top")),t=$(window).scrollTop();GAMEUSERS.common.stickySelector.height()+50>$("main article:visible").height()||(n>t&&GAMEUSERS.common.stickyStuck&&0===e&&GAMEUSERS.common.stickyAnimationDone?(GAMEUSERS.common.stickyAnimationDone=!1,GAMEUSERS.common.stickyMenuAnimation(GAMEUSERS.common.headerHeightVer2,450)):n<t&&GAMEUSERS.common.stickyStuck&&50===e&&GAMEUSERS.common.stickyAnimationDone&&(GAMEUSERS.common.stickyAnimationDone=!1,GAMEUSERS.common.stickyMenuAnimation(0,280))),n=t})}},GAMEUSERS.common.stickyMenuAnimation=function(e,t){GAMEUSERS.common.stickySelector&&(GAMEUSERS.common.stickySelector.stop(),GAMEUSERS.common.stickySelector.animate({paddingTop:e+"px"},{duration:t,complete:function(){GAMEUSERS.common.stickyAnimationDone=!0}}))},GAMEUSERS.common.openedGroupObj={},GAMEUSERS.common.changeMenuContents=function(e,t,o){o?contents_data.opened_content[t]=o:o=contents_data.opened_content[t],$(".cd-secondary-nav ul li a").removeClass("active"),$(".cd-secondary-nav [data-group="+t+"]").addClass("active"),$("[id^=content_]").addClass("element_hidden"),$("#content_"+t+"_"+o).removeClass("element_hidden"),$("[id^=menu_]").addClass("element_hidden"),$("#menu_"+t).removeClass("element_hidden"),$("main .menu").removeClass(function(e,t){return(t.match(/\menu_margin_\S+/g)||[]).join(" ")}),$("main .menu").addClass("menu_margin_"+t),GAMEUSERS.common.stickyMenuAnimation(0,600),GAMEUSERS.common.stickyStuck=!1,scrollToAnchor("main",-(GAMEUSERS.common.headerHeightVer2+GAMEUSERS.common.tabHeightVer2),0)},GAMEUSERS.common.readFeed=function(e,t,o,n,a,i){var r="#feed_card_box";n&&loadingToggle(e,null);var c=new FormData;c.append("api_type","feed"),c.append("type",o),c.append("page",t);var s=$("#form_fuel_csrf_token").val();c.append("fuel_csrf_token",s),$.ajax({url:uri_base+"rest/api/common.json",dataType:"json",type:"POST",data:c,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code_feed&&($('[id="menu_card"][data-feed="'+o+'"]').data("page",t),a&&scrollToAnchor("main",-(GAMEUSERS.common.headerHeightVer2+GAMEUSERS.common.tabHeightVer2),0),$(r).html(e.code_feed),contents_data.feed_index.state=e.state,contents_data.feed_index.url=e.url,contents_data.feed_index.meta_title=e.meta_title,contents_data.feed_index.meta_keywords=e.meta_keywords,contents_data.feed_index.meta_description=e.meta_description,i&&(GAMEUSERS.common.changeUrlAndMeta("feed","index"),$("#tab_feed a").attr("href",e.url)),"smartphone"!==agent_type&&(GAMEUSERS.common.thumbnailAdHideShow(),$(r).not(".card_thumbnail").imagesLoaded(function(){GAMEUSERS.common.masonryFeed.masonry("reloadItems"),GAMEUSERS.common.masonryFeed.masonry("layout"),AOS.init({disable:!0}),GAMEUSERS.common.stickyMenuAnimation(0,600)}))),e.code_feed_pagination&&$("#feed_pagination").html(e.code_feed_pagination)}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){n&&loadingToggle(e,null)})},GAMEUSERS.common.readCommunityList=function(e,t,o,n,a,i,r){var c="#community_list";a&&loadingToggle(e,null);var s=new FormData;s.append("api_type","community_list"),s.append("type",o),n&&s.append("user_no",n),s.append("page",t);var d=$("#form_fuel_csrf_token").val();s.append("fuel_csrf_token",d),$.ajax({url:uri_base+"rest/api/common.json",dataType:"json",type:"POST",data:s,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code&&($(c).html(e.code),i&&scrollToAnchor("main",-(GAMEUSERS.common.headerHeightVer2+GAMEUSERS.common.tabHeightVer2),0),contents_data.community_index.state=e.state,contents_data.community_index.url=e.url,contents_data.community_index.meta_title=e.meta_title,contents_data.community_index.meta_keywords=e.meta_keywords,contents_data.community_index.meta_description=e.meta_description,r&&(GAMEUSERS.common.changeUrlAndMeta("community","index"),$("#tab_community a").attr("href",e.url)))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){a&&loadingToggle(e,null)})},GAMEUSERS.common.readWikiList=function(e,t,o,n,a){var i="#wiki_list";o&&loadingToggle(e,null);var r=new FormData;r.append("api_type","wiki_list"),r.append("page",t);var c=$("#form_fuel_csrf_token").val();r.append("fuel_csrf_token",c),$.ajax({url:uri_base+"rest/api/common.json",dataType:"json",type:"POST",data:r,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code&&($(i).html(e.code),o&&scrollToAnchor("main",-(GAMEUSERS.common.headerHeightVer2+GAMEUSERS.common.tabHeightVer2),0),contents_data.wiki_index.state=e.state,contents_data.wiki_index.url=e.url,contents_data.wiki_index.meta_title=e.meta_title,contents_data.wiki_index.meta_keywords=e.meta_keywords,contents_data.wiki_index.meta_description=e.meta_description,a&&(GAMEUSERS.common.changeUrlAndMeta("wiki","index"),$("#tab_wiki a").attr("href",e.url)))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){o&&loadingToggle(e,null)})},GAMEUSERS.common.readFooterCard=function(e){var t="footer .card_box",o=new FormData;o.append("api_type","footer_card");var n=$("#form_fuel_csrf_token").val();o.append("fuel_csrf_token",n),$.ajax({url:uri_base+"rest/api/common.json",dataType:"json",type:"POST",data:o,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code&&($(t).html(e.code),$(t).imagesLoaded(function(){GAMEUSERS.common.masonryFooter.masonry("reloadItems"),GAMEUSERS.common.masonryFooter.masonry("layout")}))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){})},GAMEUSERS.common.readGameIndex=function(e,t){var o="#footer_game_index_menu",n="#footer_game_index";loadingToggle(e,null);var a=new FormData;a.append("api_type","game_index"),$(".index_game_list_search_keyword_button")[0]||a.append("first_load",!0),a.append("page",t);var i=$(e).data("keyword");i&&a.append("keyword",i);var r=$("#form_fuel_csrf_token").val();a.append("fuel_csrf_token",r),$.ajax({url:uri_base+"rest/api/common.json",dataType:"json",type:"POST",data:a,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code_menu&&$(o).html(e.code_menu),e.code&&($(n).html(e.code),i&&$(n+" #collapseListGroup0").collapse("show"))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){loadingToggle(e,null)})},GAMEUSERS.common.thumbnailAdHideShow=function(e){var t=$(window).width();t<1125?$("[data-thumbnail-hide=true]").hide():$("[data-thumbnail-hide=true]").show()},GAMEUSERS.common.socialShare=function(e){var t=$(e).attr("id"),o=null,n=encodeURIComponent($("title").text()),a=encodeURIComponent(location.href),i="",r="Share";if("twitter"===t)o="https://twitter.com/share?url="+a+"&text="+n,i="Twitter";else if("facebook"===t)o="https://www.facebook.com/sharer/sharer.php?u="+a,i="Facebook";else if("google_plus"===t)o="https://plus.google.com/share?url="+a,i="Google+";else if("hatena"===t)o="http://b.hatena.ne.jp/entry/"+a,i="Hatena";else if("pocket"===t)o="http://getpocket.com/edit?url="+a,i="Pocket";else if("line"===t){var c=encodeURIComponent($("title").text()+" "+location.href);o="http://line.me/R/msg/text/?"+c,i="LINE"}else if("email"===t){var s="Game Users",d=$("title").text()+"%0A"+location.href;location.href="mailto:?subject="+s+"&body="+d,i="Email"}o&&window.open(o,"_blank"),uri_base.indexOf("gameusers.org")!==-1&&ga("send","social",i,r,"'"+uri_current+"'")},GAMEUSERS.common.socialCountTwitter=function(e){var t="#swiper_container_social_button #twitter span";e.indexOf("gameusers.org")!==-1&&$.ajax({url:"https://jsoon.digitiminimi.com/twitter/count.json",dataType:"jsonp",data:{url:e}}).done(function(e){e.count?$(t).html(e.count):$(t).html(0)}).fail(function(){}).always(function(){})},GAMEUSERS.common.socialCountFacebook=function(e){var t="#swiper_container_social_button #facebook span";$.ajax({url:"https://graph.facebook.com/",dataType:"jsonp",data:{id:e}}).done(function(e){try{e.share.share_count?$(t).html(e.share.share_count):$(t).html(0)}catch(e){$(t).html(0)}}).fail(function(){}).always(function(){})},GAMEUSERS.common.socialCountGooglePlus=function(e){var t="#swiper_container_social_button #google_plus span",o=new FormData;o.append("url",e),$.ajax({url:uri_base+"rest/social/count_google_plus.json",dataType:"json",type:"POST",data:o,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.count?$(t).html(e.count):$(t).html(0)}).fail(function(){}).always(function(){})},GAMEUSERS.common.socialCountHatena=function(e){var t="#swiper_container_social_button #hatena span";$.ajax({url:"https://b.hatena.ne.jp/entry.count",dataType:"jsonp",data:{url:e}}).done(function(e){e?$(t).html(e):$(t).html(0)}).fail(function(){}).always(function(){})},GAMEUSERS.common.socialCountPocket=function(e){var t="#swiper_container_social_button #pocket span",o=new FormData;o.append("url",e),$.ajax({url:uri_base+"rest/social/count_pocket.json",dataType:"json",type:"POST",data:o,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.count?$(t).html(e.count):$(t).html(0)}).fail(function(){}).always(function(){})},GAMEUSERS.common.bsTabFixed=function(){return setUp=function(){var e=$("#bsTab"),t=e.offset(),o=$(".content_box").width();$(window).on("scroll resize",function(){var n=$(window).scrollTop();o=$(".content_box").width(),n>t.top-65?(e.addClass("fixed"),$("body").css("margin-top",e.height()),$(".bsTab.fixed").css("width",o+"px")):(e.removeClass("fixed"),$("body").css("margin-top","0px"),$(".bsTab").css("width","100%"))}),$(window).trigger("scroll")},{setUp:setUp}}(),GAMEUSERS.common.contentFixed=function(){var e,t,o,n,a,i=0,r=0,c=0,s=[],d={};return setUp=function(){$(".content_box").imagesLoaded(function(){return e=$("#content_"+GAMEUSERS.common.openedContent+" #content_left_box"),t=$("#content_"+GAMEUSERS.common.openedContent+" #content_right_box"),a=t.offset().top+t.outerHeight(!0)-e.outerHeight(!0)-parseInt(e.css("margin-top"),10),$.inArray(GAMEUSERS.common.openedContent,s)!==-1?void refresh():(o=e.offset().top-parseInt(e.css("margin-top"),10),n=t.offset().top-parseInt(t.css("margin-top"),10),d[GAMEUSERS.common.openedContent]=e.height(),$(window).on("scroll resize",function(){var o=$(".content_box").width(),n=.7*o,a=o-n;e.css("width",a),t.css("width",n)}),i=$("#bsTab").height(),r=$("header").outerHeight(!0),c=i+r+10,e.perfectScrollbar({wheelPropagation:!0,swipePropagation:!0}),$(window).on("resize",function(){e.outerHeight(!0)>t.outerHeight(!0)||($(window).height()>e.height()+c?e.height(d[GAMEUSERS.common.openedContent]):e.height($(window).height()-c)),e.perfectScrollbar("update")}),e.outerHeight(!0)+o<t.outerHeight(!0)+n&&$(window).scroll(function(){var n=$(window).scrollTop();e.outerHeight(!0)>t.outerHeight(!0)?e.css({position:"static"}):n>a-c?e.css({position:"fixed",top:a-n+"px"}):n>o-c?e.css({position:"fixed",top:c+"px"}):e.css({position:"relative",top:"0px"})}),s.push(GAMEUSERS.common.openedContent),void refresh())})},refresh=function(){e.css("height","auto"),d[GAMEUSERS.common.openedContent]=e.height(),a=t.offset().top+t.outerHeight(!0)-e.outerHeight(!0)-parseInt(e.css("margin-top"),10),$(window).trigger("scroll"),$(window).trigger("resize")},{setUp:setUp}}(),GAMEUSERS.common.changeContents=function(e,t,o){$(e).siblings().removeClass("active"),$(e).addClass("active"),$("[id^=change_contents_"+t+"]").hide(),$("#change_contents_"+t+"_"+o).show()},GAMEUSERS.common.searchGameListNo=function(e){var t;t=e?$(e):$("#game_list_form_box #scrollable-dropdown-menu .typeahead");var o=new Bloodhound({limit:10,datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:uri_base+"rest/common/search_game_name.json?keyword=%QUERY"});o.initialize(),t.typeahead(null,{name:"gameNameTypeahead",displayKey:"value",source:o.ttAdapter(),templates:{suggestion:function(e){return'<p class="needsclick">'+e.name+"</p>"}}}).bind("typeahead:selected",function(e,t){var o=$(this).closest("#game_list_form_box").find("#game_list"),n=o.data("game-list");n||(n=[]),$.inArray(parseInt(t.game_no),n)==-1&&(n.push(t.game_no),$(o).append('<div class="original_label_game bgc_lightseagreen cursor_pointer" id="game_list_no_'+t.game_no+'" onclick="GAMEUSERS.common.deleteGameListNo(this, '+t.game_no+')">'+t.name+"</div>"))})},GAMEUSERS.common.deleteGameListNo=function(e,t){var o=$(e).closest("#game_list"),n=$(o).data("game-list");$.each(n,function(e,o){o==t&&n.splice(e,1)}),$(o).find("#game_list_no_"+t).remove()},GAMEUSERS.common.readNotifications=function(e,t,o){var n="#notifications_box",a=$(e).attr("id");"header_notifications"!==a&&loadingToggle(e,null);var i=new FormData;i.append("page",t),i.append("user_no",o);var r;"read_notifications_unread"==a?(r="unread",$(n).data("type","unread"),$("#read_notifications_unread").attr("class","btn btn-default ladda-button active"),$("#read_notifications_already").attr("class","btn btn-default ladda-button"),$("#notifications_change_all_unread_button").show()):"read_notifications_already"==a?(r="already",$(n).data("type","already"),$("#read_notifications_unread").attr("class","btn btn-default ladda-button"),$("#read_notifications_already").attr("class","btn btn-default ladda-button active"),$("#notifications_change_all_unread_button").hide()):r=$(n).data("type"),i.append("type",r),$.ajax({url:uri_base+"rest/user/read_notifications.json",dataType:"json",type:"POST",data:i,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){if(e.code){$(n).html(e.code);var t,o=$("#header_notifications_unread_total").text(),a=$("#header_notifications_unread_total").data("unread_id");t=a?a.split(","):[];var i;i=e.unread_id?e.unread_id.split(","):[];var r=0;$.each(i,function(e,o){$.inArray(o,t)==-1&&(t.push(o),r++)});var c=0;c=o-r<0?0:o-r,$("#header_notifications_unread_total").text(c),a=t.join(","),$("#header_notifications_unread_total").data("unread_id",a)}else $(n).html("")}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){"header_notifications"!==a&&loadingToggle(e,null),"read_notifications_unread"==a?$("#notifications_change_all_unread_button").show():"read_notifications_already"==a&&$("#notifications_change_all_unread_button").hide()})},GAMEUSERS.common.readNotificationsUnreadTotal=function(){var e="#header_notifications_unread_total",t=new FormData;$.ajax({url:uri_base+"rest/common/read_notifications_unread_total.json",dataType:"json",type:"POST",data:t,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(t){t.total&&$(e).html(t.total)}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){})},GAMEUSERS.common.changeUrlAndMeta=function(e,t){var o=contents_data[e+"_"+t].state,n=contents_data[e+"_"+t].url;o&&n&&window.history.pushState(o,null,n);var a=contents_data[e+"_"+t].meta_title,i=contents_data[e+"_"+t].meta_keywords,r=contents_data[e+"_"+t].meta_description;a&&i&&r&&GAMEUSERS.common.rewriteMeta(a,i,r)},GAMEUSERS.common.changeUrl=function(e,t){var o=contents_data[e+"_"+t].state,n=contents_data[e+"_"+t].url;o&&n&&window.history.pushState(o,null,n)},GAMEUSERS.common.changeMeta=function(e,t){var o=contents_data[e+"_"+t].meta_title,n=contents_data[e+"_"+t].meta_keywords,a=contents_data[e+"_"+t].meta_description;o&&n&&a&&(document.title=GAMEUSERS.common.escapeHTML(o),$("meta[name=keywords]").attr("content",GAMEUSERS.common.escapeHTML(n)),$("meta[name=description]").attr("content",GAMEUSERS.common.escapeHTML(a)))},GAMEUSERS.common.rewriteMeta=function(e,t,o){document.title=GAMEUSERS.common.escapeHTML(e),$("meta[name=keywords]").attr("content",GAMEUSERS.common.escapeHTML(t)),$("meta[name=description]").attr("content",GAMEUSERS.common.escapeHTML(o))},GAMEUSERS.common.readHelp=function(e,t,o,n){if($("#content_help_index")[0])return void GAMEUSERS.common.readHelpVer2(this,1,o,n);var a="#tab_help",i=new FormData,r=!1;$(a+" #content_left_box")[0]||(r=!0),r&&i.append("first_load",1),i.append("page",t),o&&i.append("list",o),n&&i.append("content",n);var c=$("#form_fuel_csrf_token").val();i.append("fuel_csrf_token",c),$.ajax({url:uri_base+"rest/help/read_help.json",dataType:"json",type:"POST",data:i,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code_all&&$(a).html(e.code_all),e.code_list&&$(a+" #content_left_box").html(e.code_list),e.code_content&&$(a+" #content_right_box").html(e.code_content),$(a).imagesLoaded(function(){""!==agent_type&&r&&(GAMEUSERS.common.swiperHelp=new Swiper("#swiper_container_help",{autoHeight:!0,touchRatio:1,touchAngle:10,shortSwipes:!1,longSwipesRatio:.1,longSwipesMs:50,prevButton:"#content_prev_button_help",nextButton:"#content_next_button_help"}),GAMEUSERS.common.swiperHelp.on("slideChangeStart",function(){scrollToAnchor("#swiper_container_help",-123,0)}),GAMEUSERS.common.swiperHelp.slideNext()),""===agent_type?"help"===GAMEUSERS.common.openedContent&&(GAMEUSERS.common.contentFixed.setUp(),scrollToAnchor(a+" #content_right_box",-120,0)):(GAMEUSERS.common.swiperHelp.update(!0),!e.code_list&&e.code_content&&0===GAMEUSERS.common.swiperHelp.activeIndex&&GAMEUSERS.common.swiperHelp.slideNext())})}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(e){})},GAMEUSERS.common.readHelpVer2=function(e,t,o,n){var a=!0;""!==$("#help").html()&&(a=!1);var i=new FormData;i.append("page",t),o&&i.append("list",o),n&&i.append("content",n);var r=$("#form_fuel_csrf_token").val();i.append("fuel_csrf_token",r),$.ajax({url:uri_base+"rest/help/read_help.json",dataType:"json",type:"POST",data:i,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code_list&&$("#menu_help").html(e.code_list),e.code_content&&$("#help").html(e.code_content),a||(GAMEUSERS.common.stickyMenuAnimation(0,600),GAMEUSERS.common.stickyStuck=!1,scrollToAnchor("main",-(GAMEUSERS.common.headerHeightVer2+GAMEUSERS.common.tabHeightVer2),0)),GAMEUSERS.common.closeSlideMenu()}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){})},GAMEUSERS.common.closeSlideMenu=function(){""!==agent_type&&$("#lastOverlay").is(":visible")&&$("#lastOverlay").trigger("click")},GAMEUSERS.common.escapeHTML=function(e){return e.replace(/&#039;/g,"'")};