GAMEUSERS.namespace("GAMEUSERS.uc"),$(function(){formInit("#content_bbs_index"),$("#menu_bbs, #content_bbs_index").imagesLoaded(function(){""===agent_type?GAMEUSERS.common.stickyMenu(".menu .slide","rectangle"):GAMEUSERS.common.stickyMenu(".menu_s .slide","small"),$(window).trigger("scroll")}),$("#slideMenu")[0]&&($("#slideMenu").css("display","block"),$("#slideMenu").lastSidebar({align:"left"})),$("[id=menu_card]").on("click",function(e){var a=$(this).data("group"),t=$(this).data("content");GAMEUSERS.common.changeMenuContents(this,a,t),"config"===a&&GAMEUSERS.common.changeUrlAndMeta(a,t),""===agent_type?($("[id=menu_card][data-group="+a+"]").find(".selected_icon").addClass("element_hidden"),$(this).find(".selected_icon").removeClass("element_hidden")):($("[id=menu_card][data-group="+a+"] span").removeClass("selected"),$(this).find("span").addClass("selected"),GAMEUSERS.common.closeSlideMenu())});var e=""===agent_type?"mouseenter":"touchstart",a=""===agent_type?0:1,t=!0;$("#tab_bbs").on(e,function(){"bbs"!==contents_data.initial_load.group&&void 0!==contents_data.initial_load.group&&t&&(GAMEUSERS.uc.readAnnouncement(this,1,community_no,0,0),readBbsThreadList(this,1,"uc",community_no,0),readBbs(this,1,"uc",community_no,0,0,a),t=!1)});var n=!0;$("#tab_member").on(e,function(){"member"!==contents_data.initial_load.group&&n&&(GAMEUSERS.uc.readMember(this,1,community_no,"all",0,0,0,0),n=!1)});var o=!0;$("#tab_data").on(e,function(){"data"!==contents_data.initial_load.group&&o&&(GAMEUSERS.uc.readData(this,community_no,0,0,a),o=!1)});var r=!0;$("#tab_notification").on(e,function(){"notification"!==contents_data.initial_load.group&&r&&(GAMEUSERS.uc.readNotification(this,community_no,0,0,a),r=!1)});var i=!0;$("#tab_config").on(e,function(){"config"!==contents_data.initial_load.group&&i&&(GAMEUSERS.uc.readConfig(this,community_no,0,0,a),i=!1)});var l=!0;$("#tab_help").on(e,function(){"help"!==contents_data.initial_load.group&&l&&(GAMEUSERS.common.readHelpVer2(this,1,"community","community_about"),l=!1)}),window.history&&window.history.pushState&&$(window).on("popstate",function(e){if(e.originalEvent.state){var a=e.originalEvent.state;GAMEUSERS.common.changeMenuContents(this,a.group,a.content),"readBbs"===a.function?readBbs(this,a.page,a.type,a.no,0,1,0):"readBbsComment"===a.function?readBbsComment(this,a.page,a.type,a.bbsThreadNo,0,1,0):"readBbsIndividual"===a.function?readBbsIndividual(this,a.type,a.no,a.bbsId,a.pageComment,0,1,0):"readMember"===a.function&&GAMEUSERS.uc.readMember(this,a.page,a.communityNo,a.type,0,1,0,1)}})}),GAMEUSERS.uc.modalReadFormAnnouncement=function(e,a){var t="#modal_box #"+a+"_announcement";if($(t)[0])return void $(t).modal();loadingToggle(e,null);var n=new FormData;n.append("type","uc"),n.append("community_no",a);var o=$("#form_fuel_csrf_token").val();n.append("fuel_csrf_token",o),$.ajax({url:uri_base+"rest/form/modal_announcement.json",dataType:"json",type:"POST",data:n,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(){}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.code&&($("#modal_box").append(a.code),$(t).modal(),formInit(t)),loadingToggle(e,null)})},GAMEUSERS.uc.showAnnouncementForm=function(e,a,t){if(!$("#announcement_box #form_box")[0]){if(t)var n="#announcement_box";loadingToggle(e,null);var o=new FormData;o.append("community_no",a),t&&o.append("announcement_no",t),$("#announcement_box")[0]||o.append("create_announcement_box",!0);var r=$("#form_fuel_csrf_token").val();o.append("fuel_csrf_token",r),$.ajax({url:uri_base+"rest/co/show_announcement_form.json",dataType:"json",type:"POST",data:o,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code&&($(n+" #announcement_content_box")[0]&&($(n+" #announcement_content_box").hide(),$(n+" #announcement_content_box").after(e.code)),formInit(n),scrollToAnchor(n,-130,0))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(n+" #alert_config_community",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})}},GAMEUSERS.uc.removeAnnouncementForm=function(e){var a="#announcement_box",t=$("#submit_create_announcement").data("existence");t?($(a+" #form_box").remove(),$(a+" #announcement_content_box").show()):$(a).remove()},GAMEUSERS.uc.saveAnnouncement=function(e,a,t){var n;n=t?"#announcement_box #form_box":"#modal_box #"+a+"_announcement",loadingToggle(e,null);var o=new FormData;o.append("community_no",a),t&&o.append("announcement_no",t),o.append("title",$(n+" #title").val()),o.append("comment",$(n+" #comment").val()),""!==$(n+" #image_1").val()&&o.append("image_1",$(n+" #image_1").prop("files")[0]),$(n+" #image_1_delete").prop("checked")&&o.append("image_1_delete",$(n+" #image_1_delete").prop("checked")),o.append("movie_url",$(n+" #movie_url").val());var r=$("#form_fuel_csrf_token").val();o.append("fuel_csrf_token",r),$.ajax({url:uri_base+"rest/co/save_announcement.json",dataType:"json",type:"POST",data:o,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code&&($("#announcement_box").replaceWith(e.code),t||$(n).modal("hide"),GAMEUSERS.common.stickyStuck=!1,scrollToAnchor("#announcement_box",-GAMEUSERS.common.scrollMargin,0))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(n+" #alert",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})},GAMEUSERS.uc.deleteAnnouncement=function(e,a){if(window.confirm("告知を削除しますか？")){var t="#announcement_box #form_box";loadingToggle(e,null);var n=new FormData;n.append("announcement_no",a);var o=$("#form_fuel_csrf_token").val();n.append("fuel_csrf_token",o),$.ajax({url:uri_base+"rest/co/delete_announcement.json",dataType:"json",type:"POST",data:n,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){$("#announcement_box").replaceWith(e.code)}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(t+" #alert",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})}},GAMEUSERS.uc.readAnnouncement=function(e,a,t,n,o){var r="#announcement_box";n&&loadingToggle(e,null);var i=new FormData;i.append("api_type","community_announcement"),i.append("page",a),i.append("community_no",t);var l=$("#form_fuel_csrf_token").val();i.append("fuel_csrf_token",l),$.ajax({url:uri_base+"rest/api/common.json",dataType:"json",type:"POST",data:i,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code&&($(r)[0]?$(r).replaceWith(e.code):$("#content_bbs_index").prepend(e.code),n&&(GAMEUSERS.common.stickyStuck=!1,scrollToAnchor("#announcement_box",-GAMEUSERS.common.scrollMargin,0)))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){n&&loadingToggle(e,null)})},GAMEUSERS.uc.showMemberProfile=function(e,a){var t="#panel_member",n=$(t+" #community_member_show_profile_button").data("state");n?a?$(t+" [id=personal_box_explanation]").removeClass("element_hidden"):($(t+" [id=personal_box_explanation]").addClass("element_hidden"),$(t+" #community_member_show_profile_button").data("state",!1),$(t+" #community_member_show_profile_button_text").text("プロフィールコメントを表示する")):a?$(t+" [id=personal_box_explanation]").addClass("element_hidden"):($(t+" [id=personal_box_explanation]").removeClass("element_hidden"),$(t+" #community_member_show_profile_button").data("state",!0),$(t+" #community_member_show_profile_button_text").text("プロフィールコメントを非表示にする"))},GAMEUSERS.uc.readMember=function(e,a,t,n,o,r,i,l){var _="#panel_member";a?"all"==n?$(_+" #read_member_all").data("page",a):"moderator"==n?$(_+" #read_member_moderator").data("page",a):"administrator"==n?$(_+" #read_member_administrator").data("page",a):"provisional"==n?$(_+" #read_member_provisional").data("page",a):"ban"==n&&$(_+" #read_member_ban").data("page",a):"all"==n?a=$(_+" #read_member_all").data("page"):"moderator"==n?a=$(_+" #read_member_moderator").data("page"):"administrator"==n?a=$(_+" #read_member_administrator").data("page"):"provisional"==n?a=$(_+" #read_member_provisional").data("page"):"ban"==n&&(a=$(_+" #read_member_ban").data("page")),"all"==n?($(_+" #read_member_all").attr("class","btn btn-default ladda-button active"),$(_+" #read_member_moderator").attr("class","btn btn-default ladda-button"),$(_+" #read_member_administrator").attr("class","btn btn-default ladda-button"),$(_+" #read_member_ban").attr("class","btn btn-default ladda-button"),$(_+" #read_member_provisional").attr("class","btn btn-default ladda-button")):"moderator"==n?($(_+" #read_member_all").attr("class","btn btn-default ladda-button"),$(_+" #read_member_moderator").attr("class","btn btn-default ladda-button active"),$(_+" #read_member_administrator").attr("class","btn btn-default ladda-button"),$(_+" #read_member_ban").attr("class","btn btn-default ladda-button"),$(_+" #read_member_provisional").attr("class","btn btn-default ladda-button")):"administrator"==n?($(_+" #read_member_all").attr("class","btn btn-default ladda-button"),$(_+" #read_member_moderator").attr("class","btn btn-default ladda-button"),$(_+" #read_member_administrator").attr("class","btn btn-default ladda-button active"),$(_+" #read_member_ban").attr("class","btn btn-default ladda-button"),$(_+" #read_member_provisional").attr("class","btn btn-default ladda-button")):"ban"==n?($(_+" #read_member_all").attr("class","btn btn-default ladda-button"),$(_+" #read_member_moderator").attr("class","btn btn-default ladda-button"),$(_+" #read_member_administrator").attr("class","btn btn-default ladda-button"),$(_+" #read_member_ban").attr("class","btn btn-default ladda-button active"),$(_+" #read_member_provisional").attr("class","btn btn-default ladda-button")):"provisional"==n&&($(_+" #read_member_all").attr("class","btn btn-default ladda-button"),$(_+" #read_member_moderator").attr("class","btn btn-default ladda-button"),$(_+" #read_member_administrator").attr("class","btn btn-default ladda-button"),$(_+" #read_member_ban").attr("class","btn btn-default ladda-button"),$(_+" #read_member_provisional").attr("class","btn btn-default ladda-button active")),o&&loadingToggle(e,null),$(_).data("member-type",n);var c=new FormData;$(_)[0]||c.append("first_load",1),c.append("api_type","community_member"),c.append("page",a),c.append("community_no",t),c.append("type",n);var d=$("#form_fuel_csrf_token").val();c.append("fuel_csrf_token",d),$.ajax({url:uri_base+"rest/api/common.json",dataType:"json",type:"POST",data:c,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(a){a.code?($(_)[0]?$(_+" #member_box").html(a.code):$("#content_member_index").prepend(a.code),GAMEUSERS.uc.showMemberProfile(e,!0),o&&(GAMEUSERS.common.stickyStuck=!1,scrollToAnchor("#content_member_index",-GAMEUSERS.common.scrollMargin,0)),contents_data.member_index.state=a.state,contents_data.member_index.url=a.url,contents_data.member_index.meta_title=a.meta_title,contents_data.member_index.meta_keywords=a.meta_keywords,contents_data.member_index.meta_description=a.meta_description,i&&GAMEUSERS.common.changeUrl("member","index"),l&&GAMEUSERS.common.changeMeta("member","index")):$(_+" #member_box").html("")}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){o&&loadingToggle(e,null)})},GAMEUSERS.uc.readData=function(e,a,t,n,o){var r="#content_data_index",i=new FormData;i.append("api_type","community_data"),i.append("community_no",a);var l=$("#form_fuel_csrf_token").val();i.append("fuel_csrf_token",l),$.ajax({url:uri_base+"rest/api/common.json",dataType:"json",type:"POST",data:i,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code&&($(r).html(e.code),n&&$(r).imagesLoaded(function(){GAMEUSERS.common.stickyStuck=!1,scrollToAnchor(r,-GAMEUSERS.common.scrollMargin,0)}),contents_data.data_index.state=e.state,contents_data.data_index.url=e.url,contents_data.data_index.meta_title=e.meta_title,contents_data.data_index.meta_keywords=e.meta_keywords,contents_data.data_index.meta_description=e.meta_description,o&&GAMEUSERS.common.changeUrlAndMeta("data","index"))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){})},GAMEUSERS.uc.readNotification=function(e,a,t,n,o){var r="#content_notification_index",i=new FormData;i.append("api_type","community_notification"),i.append("community_no",a);var l=$("#form_fuel_csrf_token").val();i.append("fuel_csrf_token",l),$.ajax({url:uri_base+"rest/api/common.json",dataType:"json",type:"POST",data:i,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code&&($(r).html(e.code),n&&$(r).imagesLoaded(function(){GAMEUSERS.common.stickyStuck=!1,scrollToAnchor(r,-GAMEUSERS.common.scrollMargin,0)}),contents_data.notification_index.state=e.state,contents_data.notification_index.url=e.url,contents_data.notification_index.meta_title=e.meta_title,contents_data.notification_index.meta_keywords=e.meta_keywords,contents_data.notification_index.meta_description=e.meta_description,o&&GAMEUSERS.common.changeUrlAndMeta("notification","index"))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){})},GAMEUSERS.uc.joinCommunity=function(e,a,t){var n="#join_community";loadingToggle(e,null);var o=new FormData;o.append("community_no",a),o.append("select_profile",$("input[name='select_profile']:checked").val()),o.append("type",t);var r=$("#form_fuel_csrf_token").val();o.append("fuel_csrf_token",r),$.ajax({url:uri_base+"rest/co/join_community.json",dataType:"json",type:"POST",data:o,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){"success"==e.alert_color&&(location.href=uri_current)}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(n+" #alert",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})},GAMEUSERS.uc.withdrawCommunity=function(e,a,t){var n;if(n=1==t?"コミュニティを退会しますか？":"コミュニティへの参加申請を取り消しますか？",window.confirm(n)){var o="#withdraw_community";loadingToggle(e,null);var r=new FormData;r.append("community_no",a),r.append("type",t);var i=$("#form_fuel_csrf_token").val();r.append("fuel_csrf_token",i),$.ajax({url:uri_base+"rest/co/withdraw_community.json",dataType:"json",type:"POST",data:r,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){"success"==e.alert_color&&(location.href=uri_current)}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(o+" #alert",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})}},GAMEUSERS.uc.withdrawBanCommunityMember=function(e,a,t,n,o){if(o?confirm_text="このユーザーをBANしますか？\nBANを行った場合、このユーザーはコミュニティから退会させられ、以後、参加することができなくなります。":confirm_text="このユーザーをコミュニティから退会させますか？",window.confirm(confirm_text)){var r="#member_box";loadingToggle(e,null);var i=new FormData;i.append("community_no",a),i.append("type",t),i.append("no",n),o&&i.append("ban",o);var l=$("#form_fuel_csrf_token").val();i.append("fuel_csrf_token",l),$.ajax({url:uri_base+"rest/co/withdraw_ban_community_member.json",dataType:"json",type:"POST",data:i,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){"success"==e.alert_color&&showAlert(r+" #personal_box_"+t+"_"+n,e.alert_color,e.alert_title,e.alert_message)}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(r+" #alert",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})}},GAMEUSERS.uc.setModeratorMember=function(e,a,t,n,o){var r;if(r=o?"モデレーターに認定しますか？":"モデレーターを解除しますか？",window.confirm(r)){var i="#member_box";loadingToggle(e,null);var l=new FormData;l.append("community_no",a),l.append("type",t),l.append("no",n);var _=$("#form_fuel_csrf_token").val();l.append("fuel_csrf_token",_),$.ajax({url:uri_base+"rest/co/set_moderator_member.json",dataType:"json",type:"POST",data:l,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){if(e.code){var a=null;$.each($("#panel_member button[id^=read_member_]"),function(){$(this).hasClass("active")&&(a=$(this).attr("id"),console.log(a))}),"read_member_moderator"==a?$(i+" #personal_box_"+t+"_"+n).remove():$(i+" #personal_box_"+t+"_"+n).replaceWith(e.code)}}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){loadingToggle(e,null)})}},GAMEUSERS.uc.approvalMember=function(e,a,t,n,o){var r;if(r=o?"このユーザーをコミュニティのメンバーに加えますか？":"このユーザーをコミュニティのメンバーに加えません。",window.confirm(r)){var i="#member_box";loadingToggle(e,null);var l=new FormData;l.append("community_no",a),l.append("type",t),l.append("no",n),o&&l.append("on_off",o);var _=$("#form_fuel_csrf_token").val();l.append("fuel_csrf_token",_),$.ajax({url:uri_base+"rest/co/approval_member.json",dataType:"json",type:"POST",data:l,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){"success"==e.alert_color&&($(i+" #personal_box_"+t+"_"+n).remove(),$("#read_member_provisional .badge").text(e.provisional_member_total))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){loadingToggle(e,null)})}},GAMEUSERS.uc.liftBanMember=function(e,a,t,n){if(window.confirm("このユーザーのBANを解除しますか？")){var o="#member_box";loadingToggle(e,null);var r=new FormData;r.append("community_no",a),r.append("type",t),r.append("no",n);var i=$("#form_fuel_csrf_token").val();r.append("fuel_csrf_token",i),$.ajax({url:uri_base+"rest/co/lift_ban_member.json",dataType:"json",type:"POST",data:r,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){"success"==e.alert_color&&$(o+" #personal_box_"+t+"_"+n).remove()}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){loadingToggle(e,null)})}},GAMEUSERS.uc.sendSaveNotification=function(e,a,t,n){if(!n||window.confirm("通知を一斉送信しますか？")){var o="#content_notification_index";loadingToggle(e,null);var r=new FormData;r.append("community_no",a),r.append("mail_no",t),r.append("subject",$(o+" #mail_subject_"+t).val()),r.append("body",$(o+" #mail_body_"+t).val()),n&&r.append("send",!0);var i=$("#form_fuel_csrf_token").val();r.append("fuel_csrf_token",i),$.ajax({url:uri_base+"rest/co/send_mail_all.json",dataType:"json",type:"POST",data:r,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){if("success"==e.alert_color&&n){var a=$(o+" #mail_limit").text()-1;$(o+" #mail_limit").text(a)}}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(o+" #alert_mail_all_"+t,a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null),$(o+" #mail_limit").text()<1&&($(o+" [id^=submit_send_mail_all_]").attr("disabled","disabled"),$(o+" [id^=submit_send_mail_all_]").text("送信できません"))})}},GAMEUSERS.uc.readConfig=function(e,a,t,n,o){var r="#content_config_index",i=new FormData;i.append("api_type","community_config"),i.append("community_no",a);var l=$("#form_fuel_csrf_token").val();i.append("fuel_csrf_token",l),$.ajax({url:uri_base+"rest/api/common.json",dataType:"json",type:"POST",data:i,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code_profile&&($("#content_config_index").html(e.code_profile),$("#content_config_notification").html(e.code_nofitication),$("#content_config_basic").html(e.code_basic),$("#content_config_community").html(e.code_community),$("#content_config_authority_read").html(e.code_authority_read),$("#content_config_authority_operate").html(e.code_authority_operate),$("#content_config_delete").html(e.code_delete),n&&$(r).imagesLoaded(function(){GAMEUSERS.common.stickyStuck=!1,scrollToAnchor(r,-GAMEUSERS.common.scrollMargin,0)}),contents_data.config_index.state=e.state,contents_data.config_index.url=e.url,contents_data.config_index.meta_title=e.meta_title,contents_data.config_index.meta_keywords=e.meta_keywords,contents_data.config_index.meta_description=e.meta_description,o&&GAMEUSERS.common.changeUrlAndMeta("config","index"),GAMEUSERS.common.searchGameListNo(null))}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){})},GAMEUSERS.uc.readConfigSelectProfile=function(e,a,t){var n="#select_profile_form_box";loadingToggle(e,null);var o=new FormData;o.append("page",a),o.append("community_no",t);var r=$("#form_fuel_csrf_token").val();o.append("fuel_csrf_token",r),$.ajax({url:uri_base+"rest/co/read_select_profile_form.json",dataType:"json",type:"POST",data:o,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){$(n+" #select_profile_form_content").replaceWith(e.code)}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(){loadingToggle(e,null)})},GAMEUSERS.uc.saveConfigSelectProfile=function(e,a){var t="#select_profile_form_box";loadingToggle(e,null);var n=new FormData;n.append("community_no",a),n.append("select_profile",$("input[name='select_profile']:checked").val());var o=$("#form_fuel_csrf_token").val();n.append("fuel_csrf_token",o),$.ajax({url:uri_base+"rest/co/save_select_profile.json",dataType:"json",type:"POST",data:n,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){"success"==e.alert_color&&(location.href=uri_current)}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(t+" #alert",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})},GAMEUSERS.uc.saveConfigNotification=function(e,a){var t="#config_notification";loadingToggle(e,null);var n=new FormData;n.append("community_no",a),$(t+" #mail_all").prop("checked")&&n.append("mail_all",1);var o=$("#form_fuel_csrf_token").val();n.append("fuel_csrf_token",o),$.ajax({url:uri_base+"rest/co/save_config_mail.json",dataType:"json",type:"POST",data:n,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(){}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(t+" #alert",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})},GAMEUSERS.uc.saveConfigCommunityBasis=function(e,a){var t="#config_community_basis";loadingToggle(e,null);var n=new FormData;if(n.append("community_no",a),n.append("community_name",$(t+" #community_name").val()),n.append("community_description",$(t+" #community_description").val()),n.append("community_description_mini",$(t+" #community_description_mini").val()),n.append("community_id",$(t+" #community_id").val()),$(t+" #delete_image").prop("checked")){var o=$(t+" #delete_image").data("id");n.append("delete_image_ids",o)}if(""!==$(t+" [id^=image_]").val()){var r=$(t+" [id^=image_]").attr("id");n.append(r,$(t+" [id^=image_]").prop("files")[0])}$(t+" #thumbnail_delete").prop("checked")&&n.append("thumbnail_delete",$(t+" #top_image_delete").prop("checked")),""!==$(t+" #thumbnail").val()&&n.append("thumbnail",$(t+" #thumbnail").prop("files")[0]);var i=$(t+" #game_list").data("game-list");i&&n.append("game_list",i);var l=$("#form_fuel_csrf_token").val();n.append("fuel_csrf_token",l),$.ajax({url:uri_base+"rest/co/save_config_community.json",dataType:"json",type:"POST",data:n,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){"success"==e.alert_color&&(location.href=uri_base+"uc/"+$(t+" #community_id").val()+"/config/basic")}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(t+" #alert",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})},GAMEUSERS.uc.saveConfigCommunity=function(e,a){var t="#config_community";loadingToggle(e,null);var n=new FormData;n.append("community_no",a),n.append("online_limit",$(t+" #online_limit").val()),n.append("participation_type",$(t+' input[name="participation_type"]:checked').val()),1==$(t+' input[name="open"]:checked').val()&&n.append("open",1),$(t+" #anonymity").prop("checked")&&n.append("anonymity",$(t+" #anonymity").prop("checked"));var o=$("#form_fuel_csrf_token").val();n.append("fuel_csrf_token",o),$.ajax({url:uri_base+"rest/co/save_config_community.json",dataType:"json",type:"POST",data:n,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){"success"==e.alert_color&&(location.href=uri_current)}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(t+" #alert",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})},GAMEUSERS.uc.saveConfigAuthorityRead=function(e,a){var t="#config_authority_read";loadingToggle(e,null);var n=new FormData;n.append("community_no",a),$(t+" #read_announcement_1").prop("checked")&&n.append("read_announcement_1",$(t+" #read_announcement_1").prop("checked")),$(t+" #read_announcement_2").prop("checked")&&n.append("read_announcement_2",$(t+" #read_announcement_2").prop("checked")),$(t+" #read_announcement_3").prop("checked")&&n.append("read_announcement_3",$(t+" #read_announcement_3").prop("checked")),$(t+" #read_bbs_1").prop("checked")&&n.append("read_bbs_1",$(t+" #read_bbs_1").prop("checked")),$(t+" #read_bbs_2").prop("checked")&&n.append("read_bbs_2",$(t+" #read_bbs_2").prop("checked")),$(t+" #read_bbs_3").prop("checked")&&n.append("read_bbs_3",$(t+" #read_bbs_3").prop("checked")),$(t+" #read_member_1").prop("checked")&&n.append("read_member_1",$(t+" #read_member_1").prop("checked")),$(t+" #read_member_2").prop("checked")&&n.append("read_member_2",$(t+" #read_member_2").prop("checked")),$(t+" #read_member_3").prop("checked")&&n.append("read_member_3",$(t+" #read_member_3").prop("checked")),$(t+" #read_additional_info_1").prop("checked")&&n.append("read_additional_info_1",$(t+" #read_additional_info_1").prop("checked")),$(t+" #read_additional_info_2").prop("checked")&&n.append("read_additional_info_2",$(t+" #read_additional_info_2").prop("checked")),$(t+" #read_additional_info_3").prop("checked")&&n.append("read_additional_info_3",$(t+" #read_additional_info_3").prop("checked"));var o=$("#form_fuel_csrf_token").val();n.append("fuel_csrf_token",o),$.ajax({url:uri_base+"rest/co/save_config_read.json",dataType:"json",type:"POST",data:n,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(){}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(t+" #alert",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})},GAMEUSERS.uc.saveConfigAuthorityOperate=function(e,a){var t="#config_authority_operate";loadingToggle(e,null);var n=new FormData;n.append("community_no",a),$(t+" #operate_announcement_3").prop("checked")&&n.append("operate_announcement_3",$(t+" #operate_announcement_3").prop("checked")),$(t+" #operate_bbs_comment_1").prop("checked")&&n.append("operate_bbs_comment_1",$(t+" #operate_bbs_comment_1").prop("checked")),$(t+" #operate_bbs_comment_2").prop("checked")&&n.append("operate_bbs_comment_2",$(t+" #operate_bbs_comment_2").prop("checked")),$(t+" #operate_bbs_comment_3").prop("checked")&&n.append("operate_bbs_comment_3",$(t+" #operate_bbs_comment_3").prop("checked")),$(t+" #operate_bbs_delete_3").prop("checked")&&n.append("operate_bbs_delete_3",$(t+" #operate_bbs_delete_3").prop("checked")),$(t+" #operate_bbs_thread_1").prop("checked")&&n.append("operate_bbs_thread_1",$(t+" #operate_bbs_thread_1").prop("checked")),$(t+" #operate_bbs_thread_2").prop("checked")&&n.append("operate_bbs_thread_2",$(t+" #operate_bbs_thread_2").prop("checked")),$(t+" #operate_bbs_thread_3").prop("checked")&&n.append("operate_bbs_thread_3",$(t+" #operate_bbs_thread_3").prop("checked")),$(t+" #operate_member_3").prop("checked")&&n.append("operate_member_3",$(t+" #operate_member_3").prop("checked")),$(t+" #operate_send_all_mail_3").prop("checked")&&n.append("operate_send_all_mail_3",$(t+" #operate_send_all_mail_3").prop("checked")),$(t+" #operate_config_community_3").prop("checked")&&n.append("operate_config_community_3",$(t+" #operate_config_community_3").prop("checked"));var o=$("#form_fuel_csrf_token").val();n.append("fuel_csrf_token",o),$.ajax({url:uri_base+"rest/co/save_config_operate.json",dataType:"json",type:"POST",data:n,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(){}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(t+" #alert",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})},GAMEUSERS.uc.deleteCommunity=function(e,a){var t="#config_delete_community",n=$(t+" #delete_community_verification").val();if("delete"!=n)return void showAlert(t+" #alert","warning","エラー","確認キーワードが違っています。");if(window.confirm("コミュニティを削除してもよろしいですか？")){loadingToggle(e,null);var o=new FormData;o.append("community_no",a);var r=$("#form_fuel_csrf_token").val();o.append("fuel_csrf_token",r),$.ajax({url:uri_base+"rest/co/delete_user_community.json",dataType:"json",type:"POST",data:o,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){"success"==e.alert_color&&(location.href=uri_base)}).fail(function(){uri_base.indexOf("https://gameusers.org/")===-1&&alert("error")}).always(function(a){a.alert_title&&showAlert(t+" #alert",a.alert_color,a.alert_title,a.alert_message),loadingToggle(e,null)})}};