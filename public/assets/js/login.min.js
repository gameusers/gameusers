function initLogin(e){"undefined"==typeof appMode,i18n.init({lng:language,resGetPath:uri_base+"locales/"+language+"/__ns__.json"}),$("#"+e+" #change_category_login1_button").attr("class","btn btn-default active"),$("#"+e+" #login1").show(),$("#"+e+" #login2").hide(),$("#"+e+" #registration").hide(),$("#"+e+" #change_category_login1_button").on("click",function(){$("#"+e+" #change_category_login1_button").attr("class","btn btn-default active"),$("#"+e+" #change_category_login2_button").attr("class","btn btn-default"),$("#"+e+" #change_category_registration_button").attr("class","btn btn-default"),$("#"+e+" #login1").show(),$("#"+e+" #login2").hide(),$("#"+e+" #registration").hide()}),$("#"+e+" #change_category_login2_button").on("click",function(){$("#"+e+" #change_category_login1_button").attr("class","btn btn-default"),$("#"+e+" #change_category_login2_button").attr("class","btn btn-default active"),$("#"+e+" #change_category_registration_button").attr("class","btn btn-default"),$("#"+e+" #login1").hide(),$("#"+e+" #login2").show(),$("#"+e+" #registration").hide()}),$("#"+e+" #change_category_registration_button").on("click",function(){$("#"+e+" #change_category_login1_button").attr("class","btn btn-default"),$("#"+e+" #change_category_login2_button").attr("class","btn btn-default"),$("#"+e+" #change_category_registration_button").attr("class","btn btn-default active"),$("#"+e+" #login1").hide(),$("#"+e+" #login2").hide(),$("#"+e+" #registration").show()}),$("#"+e+" #login_social_button").on("click",function(t){if(t.preventDefault(),$("#"+e+" #login1 #user_terms")[0]){var n=$("#"+e+" #login1 #user_terms").prop("checked");if(!n)return void alert("利用規約に同意する必要があります")}if("undefined"==typeof appMode){var a=$(this).attr("href");location.href=a}else if("undefined"!=typeof appMode){var a=$(this).attr("href")+"?app=1",o=window.open(a,"_blank","location=yes,closebuttoncaption=閉じる,clearcache=no,clearsessioncache=no");o.addEventListener("loadstop",function(e){if(e.url.match(/^http.+login\/redirect\/.+$/)){o.close();var t=e.url.split("/");t.length-1;getDeviceToken(),appReadHeader(),appReadContentsIndex()}})}}),$("#"+e+" #hatena_button").on("click",function(){var t=$("#"+e+" #auth_hatena").val();if(t){if($("#"+e+" #login1 #user_terms")[0]){var n=$("#"+e+" #login1 #user_terms").prop("checked");if(!n)return void alert("利用規約に同意する必要があります")}var a=testChangeUrl(uri_base)+"login/auth/openid/hatena/"+t;if("undefined"==typeof appMode)location.href=a;else if("undefined"!=typeof appMode){var o=a+"?app=1",i=window.open(o,"_blank","location=yes,closebuttoncaption=閉じる,clearcache=no,clearsessioncache=no");i.addEventListener("loadstop",function(e){if(e.url.match(/^http.+login\/redirect$/)){i.close();var t=e.url.split("/");t.length-1;getDeviceToken(),appReadHeader(),appReadContentsIndex()}})}else location.href=a}}),$("#"+e+" #form_login2").submit(function(t){if(t.preventDefault(),$("#"+e+" #login2 #user_terms")[0]){var n=$("#"+e+" #login2 #user_terms").prop("checked");if(!n)return void alert("利用規約に同意する必要があります")}loadingToggle(null,"#"+e+" #submit_login2");var a=new FormData;a.append("login_username",$("#"+e+" #login_username").val()),a.append("login_password",$("#"+e+" #login_password").val()),"undefined"!=typeof appMode&&a.append("app_mode",!0),a.append("fuel_csrf_token",$("#form_fuel_csrf_token").val()),$.ajax({url:uri_base+"login/try.php",dataType:"json",type:"POST",data:a,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.user_no&&("undefined"==typeof appMode?document.location=uri_base+"login/redirect":(getDeviceToken(),appReadHeader(),appReadContentsIndex()))}).fail(function(){alert("error")}).always(function(t){t.alert_title&&showAlert("#"+e+" #alert_login2",t.alert_color,t.alert_title,t.alert_message),loadingToggle(null,"#"+e+" #submit_login2")})}),$("#"+e+" #submit_registration").on("click",function(){if($("#"+e+" #registration #user_terms")[0]){var t=$("#"+e+" #registration #user_terms").prop("checked");if(!t)return void alert("利用規約に同意する必要があります")}var n=$("#"+e+" #registration_username").val(),a=$("#"+e+" #registration_password").val(),o=$("#"+e+" #registration_password_verification").val();if(a!=o)return void showAlert("#"+e+" #alert_registration","warning",i18n.t("common.error"),i18n.t("login.passwordsDoNotMatch"));var i=this;loadingToggle(i,null);var r=new FormData;r.append("registration_username",n),r.append("registration_password",a),"undefined"!=typeof appMode&&r.append("app_mode",!0),r.append("fuel_csrf_token",$("#form_fuel_csrf_token").val()),$.ajax({url:uri_base+"login/registration.php",dataType:"json",type:"POST",data:r,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.user_no&&("undefined"==typeof appMode?document.location=uri_base+"login/redirect":(getDeviceToken(),appChangePage({reload:"",header:"",contentsPlayer:{userId:e.user_id}})))}).fail(function(){alert("error")}).always(function(e){e.alert_title&&showAlert("#alert_registration",e.alert_color,e.alert_title,e.alert_message),loadingToggle(i,null)})})}$(function(){"undefined"==typeof appMode&&initLogin(content_id)});