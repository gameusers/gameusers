function initPresent(e){$("#"+e+" #bsTab a").on("click",function(e){e.preventDefault(),$(this).tab("show")})}function readPresentEntryUsers(e,n,t){var a=$(e).closest("#present_entry_users");loadingToggle(e,null);var o=new FormData;o.append("page",n),t&&o.append("previous",t),"undefined"!=typeof appMode&&o.append("app_mode",!0),$.ajax({url:uri_base+"rest/present/read_present_entry_users.json",dataType:"json",type:"POST",data:o,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code&&$(a).html(e.code)}).fail(function(){alert("error")}).always(function(){loadingToggle(e,null)})}function showPresentUserEditForm(e,n,t,a,o){var r=getContentId(e),p="#"+r;if("edit"==t){var d="Amazonギフト券のコード情報などが表示されます。よろしいですか？";if(!window.confirm(d))return}loadingToggle(e,null);var s=new FormData;n?s.append("regi_date",n):s.append("regi_date",$(p+" #regi_date").val()),s.append("type",t),a&&s.append("user_no",a),o&&s.append("profile_no",o),"undefined"!=typeof appMode&&s.append("app_mode",!0),$.ajax({url:uri_base+"rest/present/show_present_user_edit_form.json",dataType:"json",type:"POST",data:s,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){e.code&&($(p+" #present_user_edit").hide(),$(p+" #present_user_edit").html(e.code),$(p+" #present_user_edit").show(1e3))}).fail(function(){alert("error")}).always(function(){loadingToggle(e,null)})}function savePresentUser(e,n){var t=getContentId(e),a="#"+t+" #present_user_edit";loadingToggle(e,null);var o=new FormData;o.append("present_no",n),o.append("type",$(a+" #type").val()),o.append("sum",$(a+" #sum").val()),o.append("unit",$(a+" #unit").val()),o.append("code",$(a+" #code").val()),"undefined"!=typeof appMode&&o.append("app_mode",!0),$.ajax({url:uri_base+"rest/present/save_present_user.json",dataType:"json",type:"POST",data:o,enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(){location.href=uri_current}).fail(function(){alert("error")}).always(function(){loadingToggle(e,null)})}$(function(){"undefined"==typeof appMode&&initPresent(content_id)});